+++
date = "2015-03-06T00:07:23+11:00"
title = "Hosting a site using Fastly and S3"
Categories = [ "html", "s3", "hugo" ]
draft = true

+++

I recently moved this site across to [hugo](http://www.gohugo.io/) and s3 from my own vps with nginx. This process was pretty easy, however the docs for setting things up were a bit sketchy so I wanted to explain how I did it. 

Firstly lets review the requirements:

* Site is all static content generated by hugo
* We want to serve using the domain `www.wolfe.id.au`
* Requests to `wolfe.id.au` should be redirected to `www.wolfe.id.au`

Step one is to setup some s3 buckets to host your site, you will need one to do the redirect from the apex domain, which in our case is `wolfe.id.au` to the site which is `www.wolfe.id.au`. 

```
aws s3 mb s3://wolfe.id.au
aws s3 mb s3://www.wolfe.id.au
```

Then we sync up our content which in our case is in `public` directory within our hugo project.

```
aws s3 sync public/ s3://www.wolfe.id.au --acl public-read
```

Step three was to redelegate my domain to Amazon route53, this basically means, you're changing the direction your domain points from its existing server to a new one provided by Amazon. The reason we need to do this is we are going to use the alias feature to enable redirecting the apex domain `wolfe.id.au` to an s3 bucket.

## Links

* [Hosting a Static Website on Amazon Web Services](http://docs.aws.amazon.com/gettingstarted/latest/swh/website-hosting-intro.html)